<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TipsterAI - Pronostici</title>

    <!-- PWA Meta Tags -->
    <meta name="description" content="Pronostici sportivi basati su intelligenza artificiale">
    <meta name="theme-color" content="#7c3aed">
    <meta name="mobile-web-app-capable" content="yes">

    <!-- iOS PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="TipsterAI">
    <link rel="apple-touch-icon" href="icon-192.png">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.webmanifest">

    <!-- Favicon & Icons -->
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/app.css?v=3.5.9">
</head>

<body class="text-white">
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-gray-900 bg-opacity-95 flex items-center justify-center z-50">
        <div class="text-center">
            <div class="text-white text-2xl font-bold mb-4 animate-pulse">TipsterAI</div>
            <div class="text-blue-300 text-sm">Caricamento...</div>
        </div>
    </div>

    <!-- Login/Register Screen (hidden after login) -->
    <div id="login-container"
        class="hidden fixed inset-0 bg-gray-900 bg-opacity-95 flex items-center justify-center z-40 px-4">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full text-gray-800">
            <h2 id="auth-title" class="text-2xl font-bold mb-6 text-center">Accedi a TipsterAI</h2>

            <!-- Toggle Login/Register -->
            <div class="flex mb-6 bg-gray-100 rounded-lg p-1">
                <button id="toggle-login"
                    class="flex-1 py-2 rounded-lg font-semibold bg-purple-600 text-white transition">
                    Accedi
                </button>
                <button id="toggle-register" class="flex-1 py-2 rounded-lg font-semibold text-gray-600 transition">
                    Registrati
                </button>
            </div>

            <form id="auth-form" class="space-y-4">
                <!-- Nickname field - only visible during registration -->
                <div id="name-field" class="hidden">
                    <label class="block text-sm font-medium mb-1">Nickname</label>
                    <input type="text" id="user-name"
                        class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-500 outline-none"
                        placeholder="Mario">
                    <div class="text-xs text-gray-500 mt-1">euGENIO ti chiamer√† cos√¨!</div>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Email</label>
                    <input type="email" id="email" required
                        class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-500 outline-none">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Password</label>
                    <input type="password" id="password" required minlength="6"
                        class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-500 outline-none">
                    <div class="text-xs text-gray-500 mt-1">Minimo 6 caratteri</div>
                </div>
                <div id="auth-error" class="text-red-500 text-sm hidden"></div>
                <button type="submit" id="auth-submit-btn"
                    class="w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 rounded-lg font-bold hover:opacity-90">
                    Accedi
                </button>
            </form>

            <!-- Forgot Password Link (only visible during login) -->
            <div id="forgot-password-link" class="text-center mt-4">
                <a href="#" onclick="resetPassword(); return false;"
                    class="text-sm text-purple-600 hover:text-purple-800 font-semibold">
                    Password dimenticata?
                </a>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app-container" class="hidden">
        <!-- Top Bar -->
        <div class="bg-gradient-to-r from-purple-700 to-blue-700 shadow-lg sticky top-0 z-40">
            <div class="container mx-auto px-4 py-4 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <img src="logo.png" alt="TipsterAI" class="h-10 w-auto max-w-24 object-contain">
                    <div>
                        <h1 class="text-2xl font-black">TipsterAI</h1>
                        <p id="user-nickname-header" class="text-xs text-purple-200"></p>
                    </div>
                </div>
                <button id="logout-btn" class="text-sm hover:text-yellow-300 transition">
                    <i class="fa-solid fa-right-from-bracket mr-1"></i> Esci
                </button>
            </div>
        </div>

        <!-- Strategies Page -->
        <div id="page-strategies" class="page active container mx-auto px-4 pb-24">
            <!-- Stats Dashboard (Moved inside strategies page) -->
            <div id="stats-dashboard" class="mb-6">
                <!-- Riga 1: Box grande totale -->
                <div class="stat-card rounded-xl p-4 text-center mb-3">
                    <div class="text-gray-700 text-xs font-semibold mb-1">Pronostici da agosto 2025</div>
                    <div id="stat-total" class="text-3xl font-black text-blue-800">-</div>
                </div>

                <!-- Riga 2: 3 box piccoli -->
                <div class="grid grid-cols-3 gap-3 mb-4">
                    <div class="stat-card rounded-xl p-3 text-center">
                        <div class="text-gray-700 text-[10px] font-semibold mb-1">Pronostici<br>VINTI</div>
                        <div id="stat-wins" class="text-xl font-black text-green-600">-</div>
                    </div>
                    <div class="stat-card rounded-xl p-3 text-center">
                        <div class="text-gray-700 text-[10px] font-semibold mb-1">Pronostici<br>PERSI</div>
                        <div id="stat-losses" class="text-xl font-black text-red-600">-</div>
                    </div>
                    <div class="stat-card rounded-xl p-3 text-center">
                        <div class="text-gray-700 text-[10px] font-semibold mb-1">WINRATE</div>
                        <div id="stat-winrate" class="text-xl font-black text-green-600">-</div>
                    </div>
                </div>

                <div class="stat-card rounded-lg px-4 py-2 text-center">
                    <div class="text-gray-600 text-xs">
                        <i class="fa-solid fa-sparkles mr-1"></i>
                        Aggiornata per nuovi Pronostici: <span id="last-update" class="font-semibold">-</span>
                    </div>
                </div>
            </div>

            <h2 class="text-2xl font-black mb-6 text-center text-white tracking-tight">üìä Palinsesto del giorno
            </h2>
            <div id="strategies-grid" class="flex flex-col gap-4">
                <!-- Populated dynamically -->
            </div>
        </div>

        <!-- Ranking Page -->
        <div id="page-ranking" class="page container mx-auto px-4 pb-24">
            <div class="flex items-center justify-between mb-4">
                <button id="back-to-strategies" class="text-sm hover:text-yellow-300">
                    <i class="fa-solid fa-arrow-left mr-1"></i> Tutte le Strategie
                </button>
                <h2 id="strategy-title" class="text-xl font-bold">-</h2>
            </div>

            <!-- Resilient Internal Filter Bar (Sticky) -->
            <div id="internal-filter-bar"
                class="hidden sticky top-[72px] z-30 -mx-4 px-4 py-3 mb-4 overflow-x-auto no-scrollbar flex items-center gap-2 bg-indigo-900/80 backdrop-blur-xl border-b border-white/10 shadow-lg">
                <!-- Europa Filters -->
                <div id="filters-europa" class="hidden flex gap-2">
                    <button class="filter-chip active text-[10px] md:text-xs" data-filter="all">Tutto</button>
                    <button class="filter-chip text-[10px] md:text-xs" data-filter="ai">‚ú® AI</button>
                    <button class="filter-chip text-[10px] md:text-xs" data-filter="italiane">ITA</button>
                    <button class="filter-chip text-[10px] md:text-xs" data-filter="coppe">Coppe</button>
                    <button class="filter-chip text-[10px] md:text-xs" data-filter="principali">Top</button>
                </div>
                <!-- Mondo Filters -->
                <div id="filters-mondo" class="hidden flex gap-2">
                    <button class="filter-chip active text-[10px] md:text-xs" data-filter="all">Tutto</button>
                    <button class="filter-chip text-[10px] md:text-xs" data-filter="ai">‚ú® AI</button>
                </div>
            </div>

            <div id="matches-container" class="space-y-4">
                <!-- Populated dynamically -->
            </div>
        </div>


        <!-- History Page (7-Day Track Record) -->
        <div id="page-history" class="page container mx-auto px-4 pb-24">
            <div class="mb-6">
                <h2 class="text-3xl font-black mb-1 text-white">üìÖ Ultimi 7 Giorni</h2>
                <p class="text-white/80 text-sm italic">Track record completo delle performance</p>
            </div>

            <!-- Tab Switch -->
            <div class="flex gap-2 mb-4">
                <button id="history-tab-pronostici"
                    class="flex-1 py-3 px-4 rounded-xl font-bold text-sm transition-all bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg">
                    üéØ Pronostici
                </button>
                <button id="history-tab-trading"
                    class="flex-1 py-3 px-4 rounded-xl font-bold text-sm transition-all bg-gray-700 text-gray-300 hover:bg-gray-600">
                    üìà Trading
                </button>
            </div>

            <!-- Pronostici History (default visible) -->
            <div id="history-list" class="space-y-3">
                <!-- Populated dynamically with date cards -->
            </div>

            <!-- Trading History (hidden by default) -->
            <div id="trading-history-list" class="space-y-3 hidden">
                <!-- Populated dynamically with trading date cards -->
            </div>
        </div>

        <!-- My Matches Page -->
        <div id="page-my-matches" class="page container mx-auto px-4 pb-24">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-2xl font-black text-white">‚≠ê Le Mie Partite</h2>
                <button id="delete-all-matches-btn"
                    class="bg-red-600 text-white px-4 py-2 rounded-lg font-semibold text-sm hover:bg-red-700 transition">
                    <i class="fa-solid fa-trash mr-1"></i> Cancella Tutte
                </button>
            </div>

            <!-- Sorting Forced to Time (Hidden UI) -->

            <div id="my-matches-container" class="space-y-4">
                <!-- Populated dynamically with Betting Favorites -->
            </div>
        </div>

        <!-- Account Page -->
        <div id="account-page" class="page container mx-auto px-4 py-6 pb-24">
            <h2 class="text-2xl font-bold mb-6 text-white">Il Mio Account</h2>

            <!-- Profile Card -->
            <div class="stat-card rounded-xl p-6 mb-4">
                <div class="flex items-center gap-4 mb-6">
                    <div id="account-avatar"
                        class="bg-gradient-to-br from-purple-600 to-blue-600 w-16 h-16 rounded-full flex items-center justify-center text-white text-2xl font-black">
                        ?
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-800" id="account-name">-</h3>
                        <p class="text-gray-600 text-sm" id="account-email">-</p>
                    </div>
                </div>

                <!-- Edit Nickname Form -->
                <form id="edit-nickname-form" class="mb-4">
                    <label class="block font-semibold mb-2 text-sm text-gray-800">Cambia Nickname</label>
                    <input type="text" id="edit-nickname-input"
                        class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-500 outline-none text-gray-800"
                        placeholder="Nuovo nickname" />
                    <button type="submit"
                        class="mt-3 bg-purple-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-purple-700 transition">
                        Salva Nickname
                    </button>
                </form>
            </div>



            <!-- Telegram Notifications Card -->
            <div class="stat-card rounded-xl p-6 mt-4">
                <h3 class="font-bold mb-3 text-lg text-gray-800 flex items-center gap-2">
                    <i class="fa-brands fa-telegram text-blue-500"></i> Notifiche Telegram
                </h3>

                <!-- Not Linked State -->
                <div id="telegram-not-linked" class="space-y-3">
                    <p class="text-sm text-gray-600">Collega Telegram per ricevere notifiche live sui tuoi preferiti!
                    </p>
                    <div class="flex items-center gap-2">
                        <button id="generate-telegram-code-btn"
                            class="bg-blue-500 text-white px-4 py-2 rounded-lg font-bold text-sm hover:bg-blue-600 transition flex items-center gap-2">
                            <i class="fa-solid fa-link"></i> Genera Codice
                        </button>
                    </div>

                    <!-- Code Display (hidden initially) -->
                    <div id="telegram-code-display"
                        class="hidden bg-blue-50 border border-blue-200 rounded-lg p-4 mt-3">
                        <p class="text-sm text-gray-700 mb-2">Il tuo codice di collegamento:</p>
                        <div class="flex items-center gap-2">
                            <span id="telegram-link-code"
                                class="text-2xl font-mono font-bold text-blue-600 tracking-wider"></span>
                            <button id="copy-telegram-code" class="text-blue-500 hover:text-blue-700">
                                <i class="fa-solid fa-copy"></i>
                            </button>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">
                            1. Apri <a href="https://t.me/TipsterAI_Live_Bot" target="_blank"
                                class="text-blue-500 underline">@TipsterAI_Live_Bot</a> su Telegram<br>
                            2. Invia: <code
                                class="bg-gray-200 px-1 rounded">/start <span class="telegram-code-copy">CODICE</span></code>
                        </p>
                    </div>
                </div>

                <!-- Linked State -->
                <div id="telegram-linked" class="hidden space-y-3">
                    <div class="flex items-center gap-2 text-green-600">
                        <i class="fa-solid fa-check-circle"></i>
                        <span class="font-semibold">Collegato!</span>
                        <span id="telegram-username" class="text-gray-500 text-sm"></span>
                    </div>

                    <!-- Notification Preferences -->
                    <div class="space-y-2 mt-4">
                        <p class="text-sm font-semibold text-gray-700">Notifiche attive:</p>
                        <label class="flex items-center gap-2 text-sm text-gray-600">
                            <input type="checkbox" id="notify-kickoff" checked class="rounded text-blue-500">
                            ‚öΩ Inizio partita
                        </label>
                        <label class="flex items-center gap-2 text-sm text-gray-600">
                            <input type="checkbox" id="notify-goal" checked class="rounded text-blue-500">
                            ü•Ö Goal segnato
                        </label>
                        <label class="flex items-center gap-2 text-sm text-gray-600">
                            <input type="checkbox" id="notify-result" checked class="rounded text-blue-500">
                            üèÅ Fine partita
                        </label>
                        <label class="flex items-center gap-2 text-sm text-gray-600">
                            <input type="checkbox" id="notify-live" checked class="rounded text-blue-500">
                            üì° Notifiche Live (Trading)
                        </label>
                    </div>

                    <button id="unlink-telegram-btn"
                        class="text-red-500 text-sm hover:underline mt-2 flex items-center gap-1">
                        <i class="fa-solid fa-unlink"></i> Scollega Telegram
                    </button>
                </div>
            </div>
        </div>

        <!-- Trading Sportivo Page -->
        <div id="page-trading-sportivo" class="page container mx-auto px-4 pb-24">
            <!-- Header & Date Nav -->
            <div class="mb-6">
                <h2 class="text-2xl font-black text-white mb-1">üéØ Trading Sportivo</h2>
                <p class="text-sm text-white/70 italic mb-4">Le migliori partite selezionate per trading sportivo</p>

                <!-- Date Navigation -->
                <div class="flex items-center justify-between bg-gray-800 rounded-lg p-3 mb-4">
                    <button id="trading-date-prev" class="text-gray-400 hover:text-white transition">
                        <i class="fa-solid fa-chevron-left"></i>
                    </button>
                    <div class="text-center">
                        <div id="trading-selected-date-display" class="font-bold text-slate-800 text-sm">Oggi</div>
                        <div id="trading-date-indicator" class="text-[10px] text-gray-500 mt-0.5">-</div>
                    </div>
                    <button id="trading-date-next" class="text-gray-400 hover:text-white transition">
                        <i class="fa-solid fa-chevron-right"></i>
                    </button>
                </div>

                <!-- Dashboard Filters -->
                <div class="flex gap-2 mb-4 bg-gray-900 p-1 rounded-xl">
                    <button id="filter-trading-all"
                        class="flex-1 py-2 px-3 rounded-lg font-bold text-xs transition-all bg-gray-800 text-white shadow-lg">
                        TUTTE
                    </button>
                    <button id="filter-trading-live"
                        class="flex-1 py-2 px-3 rounded-lg font-bold text-xs transition-all bg-transparent text-gray-500 hover:bg-gray-800 flex items-center justify-center gap-1">
                        <i class="fa-solid fa-satellite-dish"></i> LIVE
                    </button>
                    <button id="filter-trading-favs"
                        class="flex-1 py-2 px-3 rounded-lg font-bold text-xs transition-all bg-transparent text-gray-500 hover:bg-gray-800 flex items-center justify-center gap-1">
                        <i class="fa-solid fa-star"></i> PREFERITI
                    </button>
                </div>

                <!-- Trading List -->
                <div id="trading-matches-container" class="space-y-4 min-h-[300px]">
                    <!-- Populated dynamically -->
                </div>

                <div id="trading-empty"
                    class="hidden flex flex-col items-center justify-center py-12 text-gray-500 opacity-50">
                    <i class="fa-solid fa-box-open text-4xl mb-3"></i>
                    <p class="text-xs font-medium">Nessuna opportunit√† trovata</p>
                </div>
            </div>
        </div>

        <!-- I Consigli di euGENIO Page (Ex Trading) -->
        <div id="page-tips" class="page container mx-auto px-4 pb-24">
            <div class="mb-6">
                <div class="flex items-center gap-3 mb-2">
                    <div class="p-3 bg-orange-500/20 rounded-2xl">
                        <i class="fa-solid fa-wand-magic-sparkles text-3xl text-orange-400"></i>
                    </div>
                    <div>
                        <h2 class="text-2xl font-black text-slate-800 mb-0.5">I Consigli</h2>
                        <p class="text-[10px] font-bold text-orange-600 uppercase tracking-widest">Le selezioni di
                            euGENIO AI per oggi</p>
                    </div>
                </div>
            </div>

            <!-- Multiple Containers - Dynamically populated by euGENIO -->
            <div id="parlays-container" class="space-y-6">
                <!-- Content generated in js/app.js -->
            </div>

            <div id="no-tips-msg" class="hidden text-center py-20">
                <i class="fa-solid fa-cloud-moon text-6xl text-slate-700 mb-4"></i>
                <h3 class="text-xl font-bold text-slate-800">C'√® calma oggi...</h3>
                <p class="text-gray-500">euGENIO sta aspettando match con reale valore.</p>
            </div>

            <div id="no-tips-msg" class="hidden text-center py-20 opacity-30">
                <i class="fa-solid fa-box-open text-6xl mb-4"></i>
                <p>Nessun consiglio generato per oggi</p>
            </div>
        </div>

        <!-- Live Radar Page (Ex Serie A) -->
        <div id="page-live" class="page container mx-auto px-4 pb-24">
            <div class="mb-6">
                <div class="flex items-center gap-3 mb-2">
                    <div class="relative">
                        <i class="fa-solid fa-satellite-dish text-4xl text-white"></i>
                        <span class="absolute -top-1 -right-1 flex h-3 w-3">
                            <span
                                class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
                            <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500"></span>
                        </span>
                    </div>
                    <div>
                        <h2 class="text-2xl font-black text-white mb-0.5 tracking-tighter">Comando LIVE</h2>
                        <p class="text-[10px] font-bold text-white/70 uppercase tracking-widest">Top Leagues Monitoring
                        </p>
                    </div>
                </div>

                <div id="live-hub-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Populated dynamically from Live Hub -->
                    <div class="col-span-full text-center py-12 text-gray-400">
                        <i class="fa-solid fa-radar text-5xl mb-4 opacity-20"></i>
                        <p>Scansione match in corso...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Nav - MATCHING HEADER GRADIENT FOR SYMMETRY -->
        <div id="bottom-nav-bar"
            class="fixed bottom-0 left-0 right-0 flex justify-around py-3 z-50 shadow-lg border-t border-white/10"
            style="background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);">
            <button data-page="strategies"
                class="nav-btn flex flex-col items-center text-white transition hover:scale-110">
                <i class="fa-solid fa-list text-xl mb-1"></i>
                <span class="text-[10px] font-bold uppercase tracking-wide">Strategie</span>
            </button>
            <button data-page="history"
                class="nav-btn flex flex-col items-center text-white/60 hover:text-white transition hover:scale-110">
                <i class="fa-solid fa-calendar-days text-xl mb-1"></i>
                <span class="text-[10px] font-bold uppercase tracking-wide">7 Giorni</span>
            </button>
            <button data-page="my-matches"
                class="nav-btn flex flex-col items-center text-white/60 hover:text-yellow-300 transition hover:scale-110">
                <i class="fa-solid fa-star text-xl mb-1"></i>
                <span class="text-[10px] font-bold uppercase tracking-wide">Preferiti</span>
            </button>
            <button data-page="tips"
                class="nav-btn flex flex-col items-center text-white/60 hover:text-orange-300 transition hover:scale-110">
                <i class="fa-solid fa-wand-magic-sparkles text-xl mb-1"></i>
                <span class="text-[10px] font-bold uppercase tracking-wide">Consigli</span>
            </button>
            <button data-page="live"
                class="nav-btn flex flex-col items-center text-white/60 hover:text-red-400 transition hover:scale-110">
                <div class="relative mb-1">
                    <i class="fa-solid fa-satellite-dish text-xl"></i>
                    <span id="live-badge"
                        class="hidden absolute -top-1 -right-2 bg-red-500 text-[8px] font-black text-white px-1 rounded-full animate-pulse">‚óè</span>
                </div>
                <span class="text-[10px] font-bold uppercase tracking-wide">Live</span>
            </button>
            <button data-page="account"
                class="nav-btn flex flex-col items-center text-white/60 hover:text-blue-300 transition hover:scale-110">
                <i class="fa-solid fa-user text-xl mb-1"></i>
                <span class="text-[10px] font-bold uppercase tracking-wide">Account</span>
            </button>
        </div>

        <script>
            // ==================== CREDENZIALI FIREBASE E GEMINI ====================
            // NEW: TispsterAI-APP (Public App Database)
            window.firebaseConfig = {
                apiKey: "AIzaSyD7aXUbEshUFsUnpIDR3ZO1tAIgMsb_zpc",
                authDomain: "tispsterai-app.firebaseapp.com",
                projectId: "tispsterai-app",
                storageBucket: "tispsterai-app.firebasestorage.app",
                messagingSenderId: "166289799388",
                appId: "1:166289799388:web:d8b31f2c24eb1d75f11c19"
            };
            // Gemini API Key is now handled securely server-side via Cloud Functions.
            // No more direct client-side keys.
        </script>

        <!-- AI CHATBOT WIDGET -->
        <div id="ai-chat-widget" class="fixed bottom-20 right-6 z-50 flex flex-col items-end font-sans">
            <!-- Chat Window -->
            <div id="ai-chat-window"
                class="hidden bg-white w-[350px] h-[550px] max-h-[85vh] rounded-2xl shadow-2xl border border-gray-200 flex flex-col mb-4 overflow-hidden transition-all transform origin-bottom-right">

                <!-- Header -->
                <div
                    class="bg-gradient-to-r from-purple-600 to-blue-600 p-4 flex justify-between items-center text-white">
                    <div class="flex items-center gap-2">
                        <i class="fa-solid fa-robot"></i>
                        <span class="font-bold text-sm">euGENIO üßû‚Äç‚ôÇÔ∏è</span>
                    </div>
                    <button id="close-chat-btn" class="hover:text-gray-200 transition">
                        <i class="fa-solid fa-xmark"></i>
                    </button>
                </div>

                <!-- Messages Area -->
                <div id="chat-messages" class="flex-1 p-4 overflow-y-auto bg-gray-50 space-y-3 text-sm">
                    <!-- Welcome Message dynamically added -->
                </div>

                <!-- Input Area -->
                <div class="p-3 bg-white border-t border-gray-100">
                    <form id="chat-form" class="flex gap-2">
                        <input type="text" id="chat-input" placeholder="Scrivi una domanda..."
                            class="flex-1 p-2 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500">
                        <button type="submit"
                            class="bg-purple-600 text-white p-2 rounded-lg hover:bg-purple-700 transition shadow-sm disabled:opacity-50">
                            <i class="fa-solid fa-paper-plane"></i>
                        </button>
                    </form>
                </div>
            </div>

            <!-- Toggle Button -->
            <button id="toggle-chat-btn"
                class="bg-gradient-to-r from-purple-600 to-blue-600 text-white w-14 h-14 rounded-full shadow-lg hover:shadow-xl transition transform hover:scale-105 flex items-center justify-center text-2xl">
                <i class="fa-solid fa-comment-dots"></i>
            </button>
        </div>

        <script type="module" src="js/app.js?v=3.5.23"></script>
        <script src="js/pwa.js?v=3.5.3"></script>
</body>

</html>